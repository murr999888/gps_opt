<div class="help">
<h3><strong>Создание маршрутов. Порядок работы.</strong></h3>

<p><strong>Методология расчета маршрутов.</strong></p>

<p><strong>Частичное распределение заказов.</strong></p>

<p>Мы не ставим задачи распределить все заказы и принимаем, что часть заказов будет отброшена и перенесена на следующий расчёт.</p>

<p>За счет дифференцированного распределения штрафов за отказ от посещения мы устанавливаем важность включения конкретных заказов в маршруты.</p>

<p><strong>Полное распределение заказов.</strong></p>

<p>Мы распределяем все заказы между имеющимися машинами. Цель - максимально уменьшить количество используемых машин.</p>

<p>Штраф за отказ от посещения относительно высок и для всех заказов одинаков.</p>

<ol>
	<li>Устанавливаем дату проведения расчета.</li>
	<li>Отмечаем машины для участия в расчете и корректируем их параметры при необходимости.</li>
	<li>Устанавливаем достаточное количество рейсов - минимум три&nbsp;для крупных машин (Исузу, Мерседес) и 4-5 для Таврий.</li>
	<li>Загружаем заказы.</li>
	<li>Устанавливаем для иногородних и удаленных (Сартана) заказов штраф за отказ от посещения - 120 мин. Проверяем наличие частных клиентов для этих заказов - поскольку для водовозы&nbsp;по-умолчанию частных лиц не обслуживают, но, скорее всего, доставка удаленным клиентам будет сделана в том числе водовозом, то задаем для таких заказов все машины&nbsp;в качестве доступных.</li>
	<li>Проверяем все заказы по комибинации &quot;Тип продукции - Вода&quot; + группа клиентов&nbsp;&quot;Бесплатники, Реклама, Частные лица (адреса)&quot;. Устанавливаем для этих заказов все доступные машины (или только добавляем водовозы) как допустимые.</li>
	<li>Запускаем быстрый предварительный расчет (при снятом флажке &quot;Использовать локальный поиск&quot;).</li>
	<li>Анализируем отброшенные заказы (если есть), вносим необходимые корректировки и повторяем расчет, пока отброшенных заказов не будет. Если машин для расчета отмечено достаточно - отброшенных заказов быть не должно.</li>
	<li>Анализируем сформированные маршруты. Если есть одиночные маршруты малой (3-4 часа) общей продолжительности, пытаемся исключить эту машину и повторяем расчет.</li>
	<li>Снова проверяем маршруты (после изменения состава машин заказы будет перераспределены).</li>
	<li>Если плотность маршрутов достаточна - устанавливаем флаг &quot;Локальный поиск&quot; и время расчета не менее 15 минут и снова запускаем расчет. Локальный поиск позволяет дополнительно сократить длину маршрутов на 3-5% и в некоторых случаях может еще уменьшить&nbsp;количество маршрутов.</li>
</ol>

<p><strong>Время расчета.</strong></p>

<p>Быстрый предварительный расчет (флаг &quot;Использовать локальный поиск&quot; снят): при достаточном количестве машин происходит в пределах 1-2 минут.</p>

<p>Локальный поиск: ограничен&nbsp;параметром &quot;Макс. время поиска решения&quot;.</p>

<p>Чем больше количество распределяемых заказов и чем больше заказов приходится на одну машину, тем больше время предварительного расчета.</p>

<p>Обычное время расчета при количестве заказов до 250 - менее 5 минут, 250-350 заказов - 5-10 минут,&nbsp;350-450 заказов - 10-20 минут.</p>

<p>Вы можете прервать расчет в любой момент нажав кнопку &quot;Прервать&quot; в окне &quot;Ожидание&quot;, но лучше этого избегать, поскольку прерывание процесса расчета производится в аварийном режиме и это может&nbsp;повлиять на стабильность дальнейшей работы программы.</p>

<p><strong>Обычная последовательность действий.</strong></p>

<p>1. Устанавливаем параметры расчета. После выбора рабочей даты таблицы &quot;Заказы&quot;, &quot;Маршрутные листы&quot; и &quot;Отброшенные заказы&quot; будут очищены.</p>

<p><img alt="" src="./help/images/images/create_routelists_params.jpg" style="width: 441px; height: 426px;" /></p>

<p><strong>&quot;Дата&quot;</strong> - дата отбора заказов.</p>

<p><strong>&quot;Допустимое время ожидания&quot;</strong> - величина &quot;провисания&quot; времени, допускаемая при расчете.</p>

<p><strong>&quot;Стоимость машины&quot;</strong> - параметр, влияющий на количество машин, на которые будут распределены заказы. Каждая дополнительная машина, на которую будут распределены заказы, увеличит общую &quot;стоимость&quot; маршрутов на даную величину. Увеличение значения стоимости машины может привести к отбрасыванию заказов в случаях, когда использование&nbsp;дополнительной&nbsp;машины&nbsp;для доставки заказа будет &quot;дороже&quot;, чем штраф за непосещение&nbsp;заказа.</p>

<p><strong>&quot;Глобальный коэффициент дуги (продолжительность, расстояние)&quot;</strong> - параметры, позволяющие выровнять (уменьшить разницу между самым большим значением и самым маленьким) суммарное время работы (<strong>&quot;продолжительность&quot;</strong>) и/или суммарный пробег (<strong>&quot;расстояние&quot;</strong>) машин при расчете маршрутов. Излишне большое значение коэффициентов может привести к отбрасыванию заказов или к увеличению времени в пути.</p>

<p><strong>&quot;Минимизация времени&quot;</strong> - определяет поведение расчета &quot;выехать на маршрут как можно раньше и вернуться в депо как можно раньше&quot;.</p>

<p><strong>&quot;Мягкая нижняя граница (вода, л)&quot;</strong> - .параметр, позволяющий увеличить загрузку емкостей машины в начале каждого маршрута. Может привести к появлению незначительного конечного остатка на машине в конце дня.</p>

<p><strong>&quot;Расчет заправок&quot;</strong> - вариант использования&nbsp;заправок в данном расчете.</p>

<p><strong>&quot;Заправка по расходу - до полного&quot;</strong> - если при расчете в маршрут будет включено&nbsp;посещение АЗС, то величина &quot;заправленного топлива&quot; будет максимальной в пределах емкости топливного бака.</p>

<p><strong>&quot;Алгоритм&quot;</strong> - используемый при расчете алгоритм поиска оптимального значения.</p>

<p><strong>&quot;Использовать локальный поиск&quot;</strong> - флаг включения поиска дополнительных локальных минимумов стоимости маршрута.</p>

<p><strong>&quot;Максимальное время поиска решения&quot;</strong> - предел времени поиска оптимального решения (как с использованием локального поиска, так и без него).</p>

<p>2. Определяем перечень машин, участвующих в расчете (выделяем их флажками).&nbsp;При необходимости корректируем параметры отдельных машин.</p>

<p><img alt="" src="./help/images/images/distr_set_autos.jpg" style="width: 428px; height: 269px;" /></p>

<p>3. Загружаем заказы из учетной системы.</p>

<p><img alt="" src="./help/images/images/distr_get_orders.jpg" style="width: 596px; height: 276px;" /></p>

<p>4. Определяем перечень заказов, участвующих в расчете. Используем фильтр заказов при необходимости.</p>

<p><img alt="" src="./help/images/images/distr_set_orders.jpg" style="width: 602px; height: 502px;" /></p>

<p>5. Корректируем при необходимости параметры заказов (время разгрузки, перечень допустимых машин).</p>

<p><img alt="" src="./help/images/images/dist_corr_orders.jpg" style="width: 418px; height: 522px;" /></p>

<p>6. Нажимаем кнопку &quot;Расчет&quot; и ожидаем окончания обработки данных.</p>

<p><img alt="" src="./help/images/images/distr_start.jpg" style="width: 665px; height: 489px;" /></p>

<p>7. По окончанию расчета в таблице &quot;Маршрутные листы&quot; будут отображены сформированные маршруты, а в таблице &quot;Отброшенные заказы&quot; - заказы, которые были исключены из расчета.</p>

<p><img alt="" src="./help/images/images/distr_routes_dropped.jpg" style="width: 914px; height: 650px;" /></p>

<p>8. Анализируем состав отброшенных заказов. При необходимости изменяем значения штрафов в отброшенных заказах и&nbsp;повторяем расчет.</p>

<p><img alt="" src="./help/images/images/distr_corr_dropped.jpg" style="width: 711px; height: 305px;" /></p>

<p>9. Просматриваем сформированные маршруты - анализируем начальную загрузку. При необходимости изменяем состав машин, участвующих в расчете и повторяем расчет.</p>

<p><img alt="" src="./help/images/images/distr_view_route_cargo.jpg" style="width: 720px; height: 493px;" /></p>

<p>10. Открываем окно просмотра результатов кнопкой &quot;Карта&quot;.</p>

<p><img alt="" src="./help/images/images/distr_view_onmap.jpg" style="width: 399px; height: 243px;" /></p>

<p>Просматриваем маршруты на карте.</p>

<p><img alt="" src="./help/images/images/result_viewer.jpg" style="width: 1000px; height: 481px;" /></p>

<p>11. Если результат удовлетворителен, корректируем при необходимости водителей в маршрутах&nbsp;и сохраняем сформированные маршруты в учетной системе.</p>

<p>После завершения операции сохранения, таблицы &quot;Заказы&quot;,&quot;Маршрутные листы&quot;, &quot;Отброшенные заказы&quot; будет очищены.</p>

<p><img alt="" src="./help/images/images/distr_save_routes.jpg" style="width: 433px; height: 197px;" /></p>

<p><strong>Пример работы</strong></p>

<p><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="no-print" frameborder="0" height="560" src="https://www.youtube.com/embed/p5OnA-AaEtw" width="1000"></iframe></p>
</div>
