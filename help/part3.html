<div class="help">
<h3><strong>Основные понятия. Время.</strong></h3>

<p>Маршрут движения транспортного средства состоит из следующих временных интервалов и отметок:</p>

<ul>
	<li>временное окно работы депо, оно же окно работы конкретной машины;</li>
	<li>заданный период времени выезда машины на маршрут;</li>
	<li>время, необходимое для того, чтобы доехать до очередного клиента&nbsp;(точки загрузки/разгрузки);</li>
	<li>время приезда;</li>
	<li>время, необходимое для погрузки или разгрузки;</li>
	<li>время дополнительного ожидания на точке разгрузки;</li>
	<li>время выезда к следующему клиенту.</li>
</ul>

<p><strong>Точность временных интервалов.</strong></p>

<p>Основные данные для расчета - это расстояния&nbsp;между точками на карте, которые определяются с точностью до секунды. Автомобиль, движущийся со скоростью 60 км/ч проезжает за 1 минуту километр, поэтому точность &quot;до минуты&quot; слишком мала для расчета.</p>

<p>Исходя из этого все остальные данные расчета используются и применяются в секундах. Все параметры, выраженные в минутах, пересчитываются&nbsp;в секунды.</p>

<p>Практически же будет достаточно, чтобы машина соблюдала график движения с точностью в 5-10 минут</p>

<p><strong>Окна времени, время разгрузки.</strong></p>

<p>Обработка заказов при формировании маршрутов производится с учетом <strong>окна времени</strong> заказа, т.е. согласованного <strong>заранее</strong> периода времени, в течении которого клиент готов принять груз.</p>

<p><strong>Окно времени заказа</strong> является одним из ключевых параметров&nbsp;расчета. Изменение окна заказа после проведения расчета и формирования маршрутов лишает смысла всю процедуру.</p>

<p><strong>Окно времени работы машины</strong> по умолчанию - весь день с 08-00 до 20-00. Оно может быть изменено в свойствах машины.</p>

<p><img alt="" src="./help/images/images/distr_autos_time_1.jpg" style="width: 683px; height: 222px;" /></p>

<p>В процессе расчета<strong> программа</strong> <strong> подбирает</strong> оптимальное время выезда машины на маршрут в пределах окна времени работы. Однако вы можете задать ограничение времени выезда машины установив параметр &quot;Выехать до&quot; в свойствах машины.</p>

<p><img alt="" src="./help/images/images/distr_autos_time_2.jpg" style="width: 666px; height: 236px;" /></p>

<p>В этом случает при расчете <strong>время выезда машины</strong> будет определено в интервале между временем начала окна работы машины и временем &quot;Выехать до..&quot;.</p>

<p><img alt="" src="./help/images/images/distr_autos_time_3.jpg" style="width: 665px; height: 252px;" /></p>

<p><strong>Время возврата машины</strong> при расчете ограничено окном времени работы машины, которое можно сузить изменением верхней границы окна времени работы машины или установкой параметра &quot;Вернуться до..&quot;.</p>

<p><img alt="" src="./help/images/images/auto_in_out_time.jpg" style="width: 387px; height: 496px;" /></p>

<p><strong>Время приезда</strong> машины к клиенту определяется как &quot;Время выезда&quot; + &quot;Время движения&quot;.</p>

<p><strong>Время движения (транзита)</strong> машины выдает&nbsp;сервер&nbsp;маршрутизации на основании данных карт &quot;OpenStreetMap&quot;. Процесс вычисления времени поездки от пункта &quot;А&quot; до пункта &quot;Б&quot; аналогичен построению маршрута на картах Google Maps или Yandex Maps. Однако в отличии от них возможно прокладывать маршруты по дорогам служебного пользования на территории заводов.</p>

<p>Время транзита корректируется параметром <strong>&quot;Коэффициент увеличения времени пути&quot;</strong> в свойствах машины - изменение значения этого коэффициента изменяет расчетное время движения (например значение 1,15 увеличивает время транзита на 15%). Это может быть полезно для учета особенностей конкретной машины (&quot;не едет&quot;), водителя (&quot;лихач&quot;) или дорожной обстановки (гололёд, туман, снежные заносы).</p>

<p><strong>Время на разгрузку</strong> машины вычисляется в учетной системе по данным клиента и внесенного в заказ товара.</p>

<p>На момент написания этой справки в учетной системе заданы следующие параметры расчета:</p>

<p><img alt="" src="./help/images/images/optimization_parameters.jpg" style="width: 597px; height: 289px;" /></p>

<p><strong>Время транзита (сезонный коэффициент)</strong> применяется для задания первичных свойств машины и переопределяется значением в свойствах машины.</p>

<p><strong>Время разгрузки (сезонный коэффициент)</strong>&nbsp;корректирует итоговое вычисленное значение времени разгрузки по заказу.</p>

<p><strong>Время разгрузки (минимум баллон, минут)</strong> задает минимальное время разгрузки для заказа, содержащего баллоны 19 л. любого вида.</p>

<p><strong>Время разгрузки (каждые 2 балл. минут)</strong> увеличивает минимальное время разгрузки баллонов на указанное значение&nbsp; кратно каждой паре баллонов в заказе.&nbsp;</p>

<p><strong>Время разгрузки (минимум вода, минут)</strong> задает минимальное время разгрузки при доставке разливной воды.</p>

<p><strong>Время разгрузки (каждые 100 л., минут)</strong>&nbsp;увеличивает время разгрузки на указанное значение&nbsp;кратно каждым 100 л. воды в заказе.</p>

<p><strong>Время разгрузки (минимум ПЭТ, минут)</strong> задает минимальное время разгрузки заказа, содержащего ПЭТ.</p>

<p><strong>Время разгрузки (каждые 6 ПЭТ, минут)</strong> увеличивает время разгрузки на указанное значение&nbsp;кратно двум упаковкам ПЭТ.</p>

<p><strong>Время разгрузки (минимум другое, минут)</strong> задает минимальное время для выполнения заказа, в котором нет строк (&quot;забрать документы&quot; и т.п.).</p>

<p><strong>Время разгрузки (замена емкости, минут)</strong> - задает минимальное время для заказа, в котором указан параметр &quot;Замена емкостей&quot;, на указанное значение&nbsp;кратно количеству емкостей.</p>

<p><img alt="" src="./help/images/images/order_change_tank.jpg" style="width: 667px; height: 538px;" /></p>

<p><strong>Время разгрузки (подъем на этаж)</strong> увеличивает время разгрузки на указанное значение&nbsp; кратно количеству этажей выше первого. Этаж задается в свойствах клиента в учетной системе.</p>

<p>Наличие лифта при расчете не используется: ориентируемся на самый плохой вариант - если лифт есть, он может не работать.</p>

<p><strong>Время разгрузки (на каждые XXX&nbsp;м., дополнительно YYY минут)</strong> увеличивает время разгрузки на YYY минут кратно округленному значению (&quot;Удаленность от места разгрузки&quot; разделить на&nbsp;XXX).</p>

<p>Значение удаленности места разгрузки от места остановки машины задается в свойствах клиента. Если значение удаленности равно нулю, то такой расчет не производится.</p>

<p><img alt="" src="./help/images/images/client_properties_lift.jpg" style="width: 796px; height: 501px;" /></p>

<p>При наличии в заказе нескольких позиций товара значения времени разгрузки <strong>не суммируются</strong>&nbsp;- итоговым значением времени разгрузки выбирается <strong>наибольшее вычисленное значение</strong>.</p>

<p><strong>&quot;Время разгрузки - округлять итоговое время до минут&quot;</strong> - округляет вычисленное время до целых минут. Иначе время будет с секундами.</p>

<p>Итоговое значение времени разгрузки умножается на сезонный коэффициент и округляется при необходимости до целых минут.</p>

<p>Изменить рассчитанное время разгрузки можно в диалоге редактирования заказа</p>

<p><img alt="" src="./help/images/images/edit_servicetime_in_order.jpg" style="width: 393px; height: 502px;" /></p>

<p>или задать его списку заказов</p>

<p><img alt="" src="./help/images/images/edit_servicetime_in_orderlist.jpg" style="width: 541px; height: 216px;" /></p>

<h3><strong>Допустимое время ожидания (&quot;провисание&quot;)</strong></h3>

<p>Имеет смысл разрешить машине подождать в месте разгрузки некоторое время для получения более оптимального маршрута.</p>

<p>&quot;Провисание&quot; заказа позволяет программе &quot;смягчить&quot; жесткие временные ограничения при проведении расчета.</p>

<p><img alt="" src="./help/images/images/slack_time_scheme.jpg" style="width: 700px; height: 503px;" /></p>

<p>Рисунок иллюстрирует смысл &quot;провисания&quot;.&nbsp;</p>

<p>Машина выезжает от &quot;Клиента 1&quot; в 10-40.</p>

<p>Наиболее оптимальным маршрутом с точки зрения минимального пройденного расстояния является движение &quot;Клиент 1&quot; -&gt; &quot;Клиент 2&quot;&nbsp;-&gt; &quot;Клиент 3&quot; -&gt; &quot;Клиент 4&quot; .</p>

<p>Однако, если машина поедет сразу к &quot;Клиенту 2&quot;, то она приедет ранее начала окна времени. Поэтому она вынуждена двигаться более длинным маршрутом&nbsp;&quot;Клиент 1&quot; -&gt; &quot;Клиент 3&quot;&nbsp;-&gt; &quot;Клиент 2&quot; -&gt; &quot;Клиент 4&quot;.</p>

<p>Если же мы разрешим машине подождать 5 минут на &quot;Клиенте 1&quot;, то машина сможет напрямую приехать к &quot;Клиенту 2&quot; и проедет наименьшее расстояние&nbsp;с соблюдением окон времени клиентов.</p>

<p>Влияние величины допустимого времени ожидания (&quot;провисания&quot;) на распределение заказов на реальных данных:</p>

<p>Количество машин: 21, количество заказов: 343</p>

<table border="1" cellpadding="1" cellspacing="1" style="width:600px;">
	<tbody>
		<tr>
			<td style="text-align: center;">&quot;Провисание&quot;, минут</td>
			<td style="text-align: center;">0</td>
			<td style="text-align: center;">5</td>
			<td style="text-align: center;">10</td>
			<td style="text-align: center;">15</td>
			<td style="text-align: center;">20</td>
			<td style="text-align: center;">25</td>
		</tr>
		<tr>
			<td>Количество маршрутов, шт.</td>
			<td style="text-align: right;">16</td>
			<td style="text-align: right;">17</td>
			<td style="text-align: right;">17</td>
			<td style="text-align: right;">16</td>
			<td style="text-align: right;">17</td>
			<td style="text-align: right;">17</td>
		</tr>
		<tr>
			<td>Общая длина, м</td>
			<td style="text-align: right;">711292</td>
			<td style="text-align: right;">692147</td>
			<td style="text-align: right;">681078</td>
			<td style="text-align: right;">665619</td>
			<td style="text-align: right;">663451</td>
			<td style="text-align: right;">650931</td>
		</tr>
		<tr>
			<td>Общая продолжительность</td>
			<td style="text-align: right;">21:13:46</td>
			<td style="text-align: right;">20:33:40</td>
			<td style="text-align: right;">20:19:17</td>
			<td style="text-align: right;">19:59:12</td>
			<td style="text-align: right;">19:50:34</td>
			<td style="text-align: right;">19:26:43</td>
		</tr>
		<tr>
			<td>Отброшенных заказов, шт.</td>
			<td style="text-align: right;">3</td>
			<td style="text-align: right;">3</td>
			<td style="text-align: right;">3</td>
			<td style="text-align: right;">0</td>
			<td style="text-align: right;">3</td>
			<td style="text-align: right;">2</td>
		</tr>
	</tbody>
</table>

<p>Конкретную величину &quot;провисания&quot; на каждом адресе (в пределах максимального заданного значения) программа определяет сама в процессе расчета.</p>

<p>На практике вряд ли имеет смысл устанавливать допустимое время ожидания свыше 5-10 минут.</p>

<p>Параметр допустимого времени ожидания устанавливается <strong>для всего расчета в целом</strong> (для всех машин и заказов, участвующих в расчете).</p>

<p>Установка параметра провисания в режиме оптимизации маршрута:</p>

<p><img alt="" src="./help/images/images/edit_slacktime_opt.jpg" style="width: 605px; height: 202px;" /></p>

<p>Установка параметра провисания в режимах &quot;Создание&quot; и &quot;Добавление&quot;</p>

<p><img alt="" src="./help/images/images/edit_slacktime_distr.jpg" style="width: 460px; height: 190px;" /></p>

<h3><strong>Время маршрутного листа.</strong></h3>

<p>Для маршрутного листа предусмотрено три временных интервала:</p>

<p><strong>1. Плановое время.</strong></p>

<p>Интервал времени, в рамках которого <strong>предполагается</strong> выезд и возврат машины.</p>

<p>Актуально для режима&nbsp;&quot;Оптимизация маршрута&quot; в случае, когда в маршруте не указано фактическое время выезда и возврата, и режима &quot;Дополнение маршрута&quot;, т.е. в случаях, когда маршрут уже создан в учетной системе.</p>

<p>Для маршрутов, полученных в режиме &quot;Создание&quot; - указанное для машины&nbsp;окно времени&nbsp;работы.</p>

<p><strong>2. Расчетное время.</strong></p>

<p>Время, <strong>рассчитанное</strong> программой по параметрам машины и заказам при оптимизации, создании или дополнении маршрутов. Указывается в маршрутном листе при сохранении маршрута по результатам проведенного расчета.</p>

<p><strong>3. Фактическое время.</strong></p>

<p>Время реального выезда и возврата машины по данному маршрутному листу. Указывается в учетной системе.</p>

<p><img alt="" src="./help/images/images/routelist_time.jpg" style="width:95%; max-width:  900px;" /></p>

<p>Кроме того, время маршрутного листа отображается в списке учетной системы. По-умолчанию эти колонки скрыты, но их можно отобразить через форму настройки списка.</p>

<p><img alt="" src="./help/images/images/routelist_time_list.jpg" style="width:95%; max-width:  900px;" /></p>

<p><strong>Минимизация расчетного времени маршрута.</strong></p>

<p>Про проведении расчета во всех режимах программа пытается найти решение при котором время выезда и возврата будет минимальным.&nbsp;</p>

<p>То есть машина должна выехать в рейс и вернуться обратно как можно раньше в пределах своего рабочего времени.</p>
</div>
