<div class="help">
<h3><strong>Работа с картой.</strong></h3>

<p><strong>Доступные карты.</strong></p>

<p><img alt="" src="./help/images/images/kind_of_maps.jpg" style="width: 768px; height: 260px;" /></p>

<p><strong>Определение координат.</strong></p>

<p>Для правильного определения растояний между точками на карте и, соответственно, вычисления оптимальных маршрутов, необходимо, чтобы для каждого пункта назначения были правильно указаны координаты на карте.</p>

<p>Определение координат происходит в учетной системе по факту изменения адресных данных.</p>

<p>Если для клиента или его точки указан населенный пункт, название улицы и номер дома, то учетная система сначала пытается найти уже имеющихся в базе данных клиентов с аналогичными адресными данными и использует сохраненные координаты.</p>

<p>Если клиента с такими адресными данными в базе данных не найдено, то производится запрос к геокодеру. Геокодер - это сервис, позволяющий&nbsp;по адресу определить координаты на карте.</p>

<p>Существующие доступные геокодеры:</p>

<ul>
	<li>Yandex Maps;</li>
	<li>Google Maps;</li>
	<li>Bing;</li>
	<li>Nominatim.</li>
</ul>

<p>Основной геокодер устанавливается в константах учетной системы:</p>

<p><img alt="" src="./help/images/images/find_on_map_geocoder_default.jpg" style="width: 620px; height: 230px;" /></p>

<p>Для большей части клиентов координаты определены c точностью &quot;до дома&quot;&nbsp;и могут быть использованы при расчете.</p>

<p><strong>Уточнение координат.</strong></p>

<p>В некоторых случаях есть необходимость уточнять местонахождение заказчика:</p>

<ul>
	<li>адрес клиента изначально задан с точностью до улицы (&quot;киоск на улице ХХХ рядом с ....&nbsp;&quot;&nbsp;и т.п.);</li>
	<li>по одному адресу находится несколько мест доставки, разесенных в пространстве (промзоны, территории рынков, заводские цеха);</li>
	<li>сервисы геокодинга не имеют подробной информации о нумерации домов (зачастую и названий улиц) в данном населенном пункте (села, поселки);</li>
	<li>точности определения координат &quot;до дома&quot; недостаточно и нужно обозначить местонахождение клиента в конкретной&nbsp;части&nbsp;дома (цеха).</li>
</ul>

<p>В таких случаях для корректного расчета необходимо <strong>вручную</strong> уточнить место нахождение клиента.</p>

<p>В учетной системе для этого используется форма &quot;Найти клиента на карте&quot;:</p>

<p><img alt="" src="./help/images/images/find_on_map.jpg" style="width: 580px; height: 255px;" /></p>

<p>В открытой форме по выбранному элементу справочника &quot;Контрагенты&quot; (и его точки, при необходимости) нажимаем&nbsp;кнопку&nbsp;&quot;Найти&quot;.</p>

<p>Выпадающее&nbsp;меню содержит пункты&nbsp;</p>

<ul>
	<li>&quot;По строке адреса&quot; - произойдет запрос к геокодеру и точка на карте будет указана по его данным. Геокодер не всегда может точно определить координаты.;</li>
	<li>&quot;По координатам объекта из справочника&quot; - будут использованы сохраненные в базе данных координаты объекта (уже определенные и, возможно вручную уточненные ранее). Рекомендуется использовать именно этот вариант поиска.</li>
</ul>

<p><img alt="" src="./help/images/images/find_on_map_menu.jpg" style="width: 463px; height: 188px;" /></p>

<p>При поиске по строке адреса используется один из списка геокодеров:</p>

<p><img alt="" src="./help/images/images/find_on_map_geocoders.jpg" style="width: 427px; height: 175px;" /></p>

<p>Обратите внимание, что геокодеры могут выдавать разные (и необязательно правильные) результаты. Поэтому имеет смысл попробовать поиск по всем геокодерам&nbsp; и сравнить результат с данными карт.</p>

<p>После выбора одного из этих пунктов на карте будет установлен маркер.</p>

<p><img alt="" src="./help/images/images/find_on_map_marker.jpg" style="width: 600px; height: 255px;" /></p>

<p>Для уточнения местонахождения клиента перетащите мышью маркер на новое место или прокрутив карту сделайте двойной клик в нужном месте.</p>

<p>Если маркер находится там где нужно, нажмите кнопку <strong>&quot;Клиент&quot;</strong> и уточненные координаты буду сохранены <strong>для данного клиента и выбранной точки</strong>.</p>

<p>Нажатие кнопки <strong>&quot;Группа&quot;</strong> сохранит уточненные координаты для <strong>ВСЕХ клиентов и точек</strong> с таким же адресом. Это удобно в случае, когда мы уточняем координаты клиента - частного лица во многоквартирном доме и хотим присвоить такие же координаты для остальных квартир этого же дома. <strong>Не используйте</strong> эту кнопку в случаях, когда уточняются координаты цехов&nbsp;завода, которые <strong>ВСЕ</strong> имеют один адрес.</p>

<p>Нажатие кнопки <strong>&quot;Точки&quot;</strong>&nbsp;сохранит уточненные координаты для всех точек клиента, имеющих <strong>такой же адрес</strong> как и сам клиент.</p>

<p><img alt="" src="./help/images/images/find_on_map_save.jpg" style="width: 342px; height: 108px;" /></p>

<p>Поскольку геокодер выдает координаты с точностью &quot;до дома&quot; иногда имеет смысл указать место разгрузки еще точнее.</p>

<p>Определение маршрута на карте происходит до точки на дороге ближайшей к точке объекта.</p>

<p>Магазины в жилых многоквартирных домах расположены с лицевой дома, выходящей на основную улицу. Доставка частным клиентам в этом же доме происходит со стороны подъездов с заездом со стороны двора.</p>

<p>Как правило на карте заезд со двора расположен ближе к точке объекта, чем ближайшая точка на дороге с лицевой стороны дома.</p>

<p>В таком случае, для клиента-оптовика имеет смысл определить точку на карте ближе к улице или проспекту, чем к внутриквартальным&nbsp;дорогам.</p>

<p><img alt="" src="./help/images/images/move_point_to_street.jpg" style="width: 719px; height: 313px;" />&nbsp;</p>

<p>Иногда нет возможности проехать кратчайшим путем вдоль одного дома и к разным подъездам нужно заезжать с разных сторон</p>

<p><img alt="" src="./help/images/images/move_point_break_street.jpg" style="width: 573px; height: 362px;" /></p>

<p>Наиболее эффективным&nbsp;путем было бы использование <b>терминала экспедитора</b>, с помощью которого можно&nbsp;<strong>фиксировать реальное местоположение</strong> точек разгрузки находясь непосредственно на объекте.</p>

<p>Подробнее работу с терминалом экспедитора смотрите в разделе &quot;Помощь&quot; модуля <strong>&quot;Мониторинг исполнения маршрутов&quot;</strong>.</p>

<p><img alt="" src="./help/images/images/Screenshot_1591302326(1).png" style="width: 360px; height: 600px;" /></p>
</div>
